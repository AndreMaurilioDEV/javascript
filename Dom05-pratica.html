<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="belugaframe.js"></script>
    <style>
         table {
        border-collapse: collapse;
          width: 100%;
          height: 100%;
            }

            .container{
                width: 80%;
                height: 250px
            }
           

        table, th, td {
            border-bottom: 1px solid;
            text-align: center;
        }

        h2{
            padding: 20px 0px;
        }

        section{
            display: flex;
            align-items: center;
            justify-content: center;
        }
    </style>
</head>
<body>


    <section>
        <div class="container">
            <h2>Médias dos Alunos</h2>
            <table class="table js-tabela">
                <thead>
                    <tr>
                        <th>Nome</th>
                        <th>Nota 1</th>
                        <th>Nota 2</th>
                        <th>Nota 3</th>
                        <th>Nota 4</th>
                        <th>Média</th>
                    </tr>
            
                </thead>
                <tbody>
                    <tr class="aluno">
                        <td class="aluno-nome">André</td>
                        <td class="aluno-n1">10</td>
                        <td class="aluno-n2">8</td>
                        <td class="aluno-n3">6.5</td>
                        <td class="aluno-n4">5</td>
                        <td class="aluno-m"></td>
                       
                    </tr>
            
                    <tr class="aluno">
                        <td class="aluno-nome">André</td>
                        <td class="aluno-n1">10</td>
                        <td class="aluno-n2">8</td>
                        <td class="aluno-n3">6.5</td>
                        <td class="aluno-n4">5</td>
                        <td class="aluno-m"></td>
                       
                    </tr>
            
                    <tr class="aluno">
                        <td class="aluno-nome">André</td>
                        <td class="aluno-n1">10</td>
                        <td class="aluno-n2">8</td>
                        <td class="aluno-n3">6.5</td>
                        <td class="aluno-n4">5</td>
                        <td class="aluno-m"></td>
                       
                    </tr>
            
                    <tr class="aluno">
                        <td class="aluno-nome">André</td>
                        <td class="aluno-n1">10</td>
                        <td class="aluno-n2">8</td>
                        <td class="aluno-n3">6.5</td>
                        <td class="aluno-n4">5</td>
                        <td class="aluno-m"></td>
                       
                    </tr>
            
                </tbody>
            </table>
            
        </div>
    </section>




    <script>
        
        /*calcular a media de alunos com 4 notas de uma tabela
         1- cria function
         2- armazena linha do aluno em uma var
         3- faz um loop recuperando essa var com linhas em uma nova var
         4- recupera os valores de cada td a partir da var criada no loop
         5- criar uma function(tds) pra recuperar os numeros das 
         5.1 - essa function irá atribuir os tds em uma array e retornar
         6- declarar var pra chamar a função de recuperação de colunas e atribuir nela todas as notas
         7- declarar var pra calcular media a partir do .apply
         8- atribuir a var da media na media da tabela
         */


        (function(){

           var trs = document.querySelectorAll(".js-tabela tbody .aluno")
           var x = 0;

           while(trs[x]){
            var linha = trs[x];
            var tds = linha.querySelectorAll("td")
            var notas = valorColunas(tds);
            var media = calcularmedia.apply(this, notas);
            linha.querySelector(".js-tabela tbody .aluno .aluno-m").textContent = media;
            x++;
           }


           function valorColunas (tds){
            var x = 0;
            var arr = [];
            while(tds[x]){
                if(!isNaN(tds[x].textContent) && tds[x].textContent !== ''){ // se o tds[x] puder se convertido para number e não for uma string vazia(aluno-m)
                    arr.push(parseFloat(tds[x].textContent)); // colocando notas(tds) em um array
                    
                }

                x++;
               
            }
            
            return arr;
         }

        

    

        })();



    </script>
    
</body>
</html>